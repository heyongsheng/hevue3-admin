import{S as j,ak as Z,d as w,am as H,X as L,o,c as k,I as U,k as x,w as g,ap as ue,h as a,an as de,a3 as J,ac as he,aI as pe,aJ as ce,aK as ge,Y as W,e as $,a9 as te,g as u,af as ee,ag as ae,$ as V,j as O,C as fe,aL as ke,m as X,aM as ze,aN as le,aO as Se,aP as Ne,aQ as R,aR as xe,aS as $e,a8 as Ee,au as Ie,aT as we,ad as F,a5 as Te,F as Me,ah as Ve,r as Le,aU as Be,G as Ue,B as D,H as Q,aV as se,O as oe,aW as qe,Q as Fe,R as Ae,a2 as De,D as Re,q as je,p as He,s as Ke,t as Oe,a as We}from"./index-5f3dae94.js";import{E as Je,a as Ge,v as Qe}from"./table-column-c7840fe8.js";import"./tag-03924c0e.js";import{a as me,E as ve,d as Xe}from"./radio-e40ac1e9.js";import"./checkbox-e441c6b3.js";import{g as ie,_ as Ye}from"./staffModal.vue_vue_type_script_setup_true_lang-d91dfe55.js";import{u as Ze}from"./global-964a611f.js";import{i as ea}from"./overlay-e3278dbe.js";const _e=Symbol("elPaginationKey"),aa=j({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Z}}),ta={click:e=>e instanceof MouseEvent},na=["disabled","aria-label","aria-disabled"],la={key:0},sa=w({name:"ElPaginationPrev"}),oa=w({...sa,props:aa,emits:ta,setup(e){const p=e,{t:l}=H(),m=L(()=>p.disabled||p.currentPage<=1);return(i,d)=>(o(),k("button",{type:"button",class:"btn-prev",disabled:a(m),"aria-label":i.prevText||a(l)("el.pagination.prev"),"aria-disabled":a(m),onClick:d[0]||(d[0]=b=>i.$emit("click",b))},[i.prevText?(o(),k("span",la,U(i.prevText),1)):(o(),x(a(de),{key:1},{default:g(()=>[(o(),x(ue(i.prevIcon)))]),_:1}))],8,na))}});var ia=J(oa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const ra=j({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Z}}),ua=["disabled","aria-label","aria-disabled"],da={key:0},pa=w({name:"ElPaginationNext"}),ca=w({...pa,props:ra,emits:["click"],setup(e){const p=e,{t:l}=H(),m=L(()=>p.disabled||p.currentPage===p.pageCount||p.pageCount===0);return(i,d)=>(o(),k("button",{type:"button",class:"btn-next",disabled:a(m),"aria-label":i.nextText||a(l)("el.pagination.next"),"aria-disabled":a(m),onClick:d[0]||(d[0]=b=>i.$emit("click",b))},[i.nextText?(o(),k("span",da,U(i.nextText),1)):(o(),x(a(de),{key:1},{default:g(()=>[(o(),x(ue(i.nextIcon)))]),_:1}))],8,ua))}});var ga=J(ca,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const ne=()=>he(_e,{}),fa=j({pageSize:{type:Number,required:!0},pageSizes:{type:pe(Array),default:()=>ce([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:ge}}),ma=w({name:"ElPaginationSizes"}),va=w({...ma,props:fa,emits:["page-size-change"],setup(e,{emit:p}){const l=e,{t:m}=H(),i=W("pagination"),d=ne(),b=$(l.pageSize);te(()=>l.pageSizes,(v,z)=>{if(!ea(v,z)&&Array.isArray(v)){const c=v.includes(l.pageSize)?l.pageSize:l.pageSizes[0];p("page-size-change",c)}}),te(()=>l.pageSize,v=>{b.value=v});const C=L(()=>l.pageSizes);function f(v){var z;v!==b.value&&(b.value=v,(z=d.handleSizeChange)==null||z.call(d,Number(v)))}return(v,z)=>(o(),k("span",{class:V(a(i).e("sizes"))},[u(a(ve),{"model-value":b.value,disabled:v.disabled,"popper-class":v.popperClass,size:v.size,"validate-event":!1,onChange:f},{default:g(()=>[(o(!0),k(ee,null,ae(a(C),c=>(o(),x(a(me),{key:c,value:c,label:c+a(m)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var _a=J(va,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const ba=j({size:{type:String,values:ge}}),Ca=["disabled"],Pa=w({name:"ElPaginationJumper"}),ya=w({...Pa,props:ba,setup(e){const{t:p}=H(),l=W("pagination"),{pageCount:m,disabled:i,currentPage:d,changeEvent:b}=ne(),C=$(),f=L(()=>{var c;return(c=C.value)!=null?c:d==null?void 0:d.value});function v(c){C.value=c?+c:""}function z(c){c=Math.trunc(+c),b==null||b(c),C.value=void 0}return(c,S)=>(o(),k("span",{class:V(a(l).e("jump")),disabled:a(i)},[O("span",{class:V([a(l).e("goto")])},U(a(p)("el.pagination.goto")),3),u(a(fe),{size:c.size,class:V([a(l).e("editor"),a(l).is("in-pagination")]),min:1,max:a(m),disabled:a(i),"model-value":a(f),"validate-event":!1,label:a(p)("el.pagination.page"),type:"number","onUpdate:modelValue":v,onChange:z},null,8,["size","class","max","disabled","model-value","label"]),O("span",{class:V([a(l).e("classifier")])},U(a(p)("el.pagination.pageClassifier")),3)],10,Ca))}});var ha=J(ya,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const ka=j({total:{type:Number,default:1e3}}),za=["disabled"],Sa=w({name:"ElPaginationTotal"}),Na=w({...Sa,props:ka,setup(e){const{t:p}=H(),l=W("pagination"),{disabled:m}=ne();return(i,d)=>(o(),k("span",{class:V(a(l).e("total")),disabled:a(m)},U(a(p)("el.pagination.total",{total:i.total})),11,za))}});var xa=J(Na,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const $a=j({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),Ea=["onKeyup"],Ia=["aria-current","aria-label","tabindex"],wa=["tabindex","aria-label"],Ta=["aria-current","aria-label","tabindex"],Ma=["tabindex","aria-label"],Va=["aria-current","aria-label","tabindex"],La=w({name:"ElPaginationPager"}),Ba=w({...La,props:$a,emits:["change"],setup(e,{emit:p}){const l=e,m=W("pager"),i=W("icon"),{t:d}=H(),b=$(!1),C=$(!1),f=$(!1),v=$(!1),z=$(!1),c=$(!1),S=L(()=>{const t=l.pagerCount,n=(t-1)/2,s=Number(l.currentPage),h=Number(l.pageCount);let _=!1,M=!1;h>t&&(s>t-n&&(_=!0),s<h-n&&(M=!0));const B=[];if(_&&!M){const y=h-(t-2);for(let T=y;T<h;T++)B.push(T)}else if(!_&&M)for(let y=2;y<t;y++)B.push(y);else if(_&&M){const y=Math.floor(t/2)-1;for(let T=s-y;T<=s+y;T++)B.push(T)}else for(let y=2;y<h;y++)B.push(y);return B}),P=L(()=>l.disabled?-1:0);ke(()=>{const t=(l.pagerCount-1)/2;b.value=!1,C.value=!1,l.pageCount>l.pagerCount&&(l.currentPage>l.pagerCount-t&&(b.value=!0),l.currentPage<l.pageCount-t&&(C.value=!0))});function q(t=!1){l.disabled||(t?f.value=!0:v.value=!0)}function A(t=!1){t?z.value=!0:c.value=!0}function K(t){const n=t.target;if(n.tagName.toLowerCase()==="li"&&Array.from(n.classList).includes("number")){const s=Number(n.textContent);s!==l.currentPage&&p("change",s)}else n.tagName.toLowerCase()==="li"&&Array.from(n.classList).includes("more")&&N(t)}function N(t){const n=t.target;if(n.tagName.toLowerCase()==="ul"||l.disabled)return;let s=Number(n.textContent);const h=l.pageCount,_=l.currentPage,M=l.pagerCount-2;n.className.includes("more")&&(n.className.includes("quickprev")?s=_-M:n.className.includes("quicknext")&&(s=_+M)),Number.isNaN(+s)||(s<1&&(s=1),s>h&&(s=h)),s!==_&&p("change",s)}return(t,n)=>(o(),k("ul",{class:V(a(m).b()),onClick:N,onKeyup:Ne(K,["enter"])},[t.pageCount>0?(o(),k("li",{key:0,class:V([[a(m).is("active",t.currentPage===1),a(m).is("disabled",t.disabled)],"number"]),"aria-current":t.currentPage===1,"aria-label":a(d)("el.pagination.currentPage",{pager:1}),tabindex:a(P)}," 1 ",10,Ia)):X("v-if",!0),b.value?(o(),k("li",{key:1,class:V(["more","btn-quickprev",a(i).b(),a(m).is("disabled",t.disabled)]),tabindex:a(P),"aria-label":a(d)("el.pagination.prevPages",{pager:t.pagerCount-2}),onMouseenter:n[0]||(n[0]=s=>q(!0)),onMouseleave:n[1]||(n[1]=s=>f.value=!1),onFocus:n[2]||(n[2]=s=>A(!0)),onBlur:n[3]||(n[3]=s=>z.value=!1)},[(f.value||z.value)&&!t.disabled?(o(),x(a(ze),{key:0})):(o(),x(a(le),{key:1}))],42,wa)):X("v-if",!0),(o(!0),k(ee,null,ae(a(S),s=>(o(),k("li",{key:s,class:V([[a(m).is("active",t.currentPage===s),a(m).is("disabled",t.disabled)],"number"]),"aria-current":t.currentPage===s,"aria-label":a(d)("el.pagination.currentPage",{pager:s}),tabindex:a(P)},U(s),11,Ta))),128)),C.value?(o(),k("li",{key:2,class:V(["more","btn-quicknext",a(i).b(),a(m).is("disabled",t.disabled)]),tabindex:a(P),"aria-label":a(d)("el.pagination.nextPages",{pager:t.pagerCount-2}),onMouseenter:n[4]||(n[4]=s=>q()),onMouseleave:n[5]||(n[5]=s=>v.value=!1),onFocus:n[6]||(n[6]=s=>A()),onBlur:n[7]||(n[7]=s=>c.value=!1)},[(v.value||c.value)&&!t.disabled?(o(),x(a(Se),{key:0})):(o(),x(a(le),{key:1}))],42,Ma)):X("v-if",!0),t.pageCount>1?(o(),k("li",{key:3,class:V([[a(m).is("active",t.currentPage===t.pageCount),a(m).is("disabled",t.disabled)],"number"]),"aria-current":t.currentPage===t.pageCount,"aria-label":a(d)("el.pagination.currentPage",{pager:t.pageCount}),tabindex:a(P)},U(t.pageCount),11,Va)):X("v-if",!0)],42,Ea))}});var Ua=J(Ba,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const E=e=>typeof e!="number",qa=j({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>R(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:pe(Array),default:()=>ce([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Z,default:()=>xe},nextText:{type:String,default:""},nextIcon:{type:Z,default:()=>$e},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),Fa={"update:current-page":e=>R(e),"update:page-size":e=>R(e),"size-change":e=>R(e),"current-change":e=>R(e),"prev-click":e=>R(e),"next-click":e=>R(e)},re="ElPagination";var Aa=w({name:re,props:qa,emits:Fa,setup(e,{emit:p,slots:l}){const{t:m}=H(),i=W("pagination"),d=Ee().vnode.props||{},b="onUpdate:currentPage"in d||"onUpdate:current-page"in d||"onCurrentChange"in d,C="onUpdate:pageSize"in d||"onUpdate:page-size"in d||"onSizeChange"in d,f=L(()=>{if(E(e.total)&&E(e.pageCount)||!E(e.currentPage)&&!b)return!1;if(e.layout.includes("sizes")){if(E(e.pageCount)){if(!E(e.total)&&!E(e.pageSize)&&!C)return!1}else if(!C)return!1}return!0}),v=$(E(e.defaultPageSize)?10:e.defaultPageSize),z=$(E(e.defaultCurrentPage)?1:e.defaultCurrentPage),c=L({get(){return E(e.pageSize)?v.value:e.pageSize},set(n){E(e.pageSize)&&(v.value=n),C&&(p("update:page-size",n),p("size-change",n))}}),S=L(()=>{let n=0;return E(e.pageCount)?E(e.total)||(n=Math.max(1,Math.ceil(e.total/c.value))):n=e.pageCount,n}),P=L({get(){return E(e.currentPage)?z.value:e.currentPage},set(n){let s=n;n<1?s=1:n>S.value&&(s=S.value),E(e.currentPage)&&(z.value=s),b&&(p("update:current-page",s),p("current-change",s))}});te(S,n=>{P.value>n&&(P.value=n)});function q(n){P.value=n}function A(n){c.value=n;const s=S.value;P.value>s&&(P.value=s)}function K(){e.disabled||(P.value-=1,p("prev-click",P.value))}function N(){e.disabled||(P.value+=1,p("next-click",P.value))}function t(n,s){n&&(n.props||(n.props={}),n.props.class=[n.props.class,s].join(" "))}return Ie(_e,{pageCount:S,disabled:L(()=>e.disabled),currentPage:P,changeEvent:q,handleSizeChange:A}),()=>{var n,s;if(!f.value)return we(re,m("el.pagination.deprecationWarning")),null;if(!e.layout||e.hideOnSinglePage&&S.value<=1)return null;const h=[],_=[],M=F("div",{class:i.e("rightwrapper")},_),B={prev:F(ia,{disabled:e.disabled,currentPage:P.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:K}),jumper:F(ha,{size:e.small?"small":"default"}),pager:F(Ua,{currentPage:P.value,pageCount:S.value,pagerCount:e.pagerCount,onChange:q,disabled:e.disabled}),next:F(ga,{disabled:e.disabled,currentPage:P.value,pageCount:S.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:N}),sizes:F(_a,{pageSize:c.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:(s=(n=l==null?void 0:l.default)==null?void 0:n.call(l))!=null?s:null,total:F(xa,{total:E(e.total)?0:e.total})},y=e.layout.split(",").map(I=>I.trim());let T=!1;return y.forEach(I=>{if(I==="->"){T=!0;return}T?_.push(B[I]):h.push(B[I])}),t(h[0],i.is("first")),t(h[h.length-1],i.is("last")),T&&_.length>0&&(t(_[0],i.is("first")),t(_[_.length-1],i.is("last")),h.push(M)),F("div",{class:[i.b(),i.is("background",e.background),{[i.m("small")]:e.small}]},h)}}});const Da=Te(Aa);const Ra=e=>(Ke("data-v-64903c5a"),e=e(),Oe(),e),ja={class:"staff-manage"},Ha={class:"search-wrap"},Ka=Ra(()=>O("span",{style:{"margin-right":"5px"}},"id",-1)),Oa=w({__name:"staffManage",setup(e){const p=Ze();Me(()=>{m(),S()});const l=$(),m=async()=>{const N=await Ve();l.value=N.data.list},i=L(()=>N=>{const t=l.value&&l.value.find(n=>n._id===N);return t==null?void 0:t.role_name}),d=$([]),b=$(0),C=$(!1),f=Le({_id:"",staff_account:"",staff_name:"",phone:"",gender:"",page_num:1,page_size:10,roleId:""}),v=()=>{f.page_num=1,S()},z=$(),c=()=>{z.value.resetFields(),v()},S=()=>{C.value||(C.value=!0,Be().then(N=>{C.value=!1,d.value=N.data.list,b.value=N.data.total}))},P=N=>{f.page_num=N,S()},q=$(),A=N=>{q.value.showModal(N)},K=(N,t)=>{C.value||(C.value=!0,qe().then(()=>{Fe.success({title:"成功",message:"修改员工状态成功"}),C.value=!1,S()}))};return(N,t)=>{const n=Ae,s=De,h=fe,_=Re,M=me,B=ve,y=je,T=He,I=Je,be=Xe,Ce=Ge,Pe=Da,Y=Ue("permission"),ye=Qe;return o(),k("div",ja,[O("div",Ha,[u(T,{inline:!0,model:a(f),class:"demo-form-inline",ref_key:"searchForm",ref:z},{default:g(()=>[u(_,{label:"id",prop:"_id"},{label:g(()=>[Ka,u(s,{effect:"dark",content:"请输入完整员工Id，员工id不支持模糊搜索",placement:"top"},{default:g(()=>[u(n,{name:"tishi",style:{display:"block",height:"100%"}})]),_:1})]),default:g(()=>[u(h,{modelValue:a(f)._id,"onUpdate:modelValue":t[0]||(t[0]=r=>a(f)._id=r)},null,8,["modelValue"])]),_:1}),u(_,{label:"账号",prop:"staff_account"},{default:g(()=>[u(h,{modelValue:a(f).staff_account,"onUpdate:modelValue":t[1]||(t[1]=r=>a(f).staff_account=r)},null,8,["modelValue"])]),_:1}),u(_,{label:"姓名",prop:"staff_name"},{default:g(()=>[u(h,{modelValue:a(f).staff_name,"onUpdate:modelValue":t[2]||(t[2]=r=>a(f).staff_name=r)},null,8,["modelValue"])]),_:1}),u(_,{label:"手机号",prop:"phone"},{default:g(()=>[u(h,{modelValue:a(f).phone,"onUpdate:modelValue":t[3]||(t[3]=r=>a(f).phone=r)},null,8,["modelValue"])]),_:1}),u(_,{label:"性别",prop:"gender"},{default:g(()=>[u(B,{modelValue:a(f).gender,"onUpdate:modelValue":t[4]||(t[4]=r=>a(f).gender=r)},{default:g(()=>[(o(!0),k(ee,null,ae(a(ie),(r,G)=>(o(),x(M,{key:G,label:r,value:G},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(_,{label:"角色",prop:"gender"},{default:g(()=>[u(B,{modelValue:a(f).roleId,"onUpdate:modelValue":t[5]||(t[5]=r=>a(f).roleId=r)},{default:g(()=>[(o(!0),k(ee,null,ae(a(l),r=>(o(),x(M,{key:r._id,label:r.role_name,value:r._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(_,null,{default:g(()=>[u(y,{type:"info",onClick:c},{default:g(()=>[D("重置")]),_:1}),u(y,{type:"primary",onClick:v},{default:g(()=>[D("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),Q((o(),x(y,{type:"primary",onClick:t[6]||(t[6]=r=>A())},{default:g(()=>[D("添加员工")]),_:1})),[[Y,"sys:staff:add"]]),Q((o(),x(Ce,{data:a(d),border:!0,"row-key":"_id",style:{"margin-top":"20px"}},{default:g(()=>[u(I,{prop:"_id",label:"员工id"}),u(I,{prop:"staff_account",label:"员工账号"}),u(I,{prop:"staff_name",label:"员工名字"}),u(I,{prop:"staff_account",label:"性别",align:"center"},{default:g(({row:r})=>[O("div",null,U(a(ie)[r.gender]),1)]),_:1}),u(I,{prop:"phone",label:"手机号码"}),u(I,{prop:"roleId",label:"角色",align:"center"},{default:g(({row:r})=>[O("div",null,U(a(i)(r.roleId)),1)]),_:1}),u(I,{prop:"status",label:"状态",align:"center"},{default:g(({row:r})=>[u(be,{type:a(se)[r.status].type},{default:g(()=>[D(U(a(se)[r.status].text),1)]),_:2},1032,["type"])]),_:1}),u(I,{label:"操作",width:"180"},{default:g(({row:r})=>[Q((o(),x(y,{link:"",type:"primary",onClick:G=>A(r)},{default:g(()=>[D("编辑")]),_:2},1032,["onClick"])),[[Y,"sys:staff:edit"]]),r.staff_account!==a(p).superAdmin?Q((o(),x(y,{key:0,link:"",type:"danger",onClick:G=>K(r._id,"2")},{default:g(()=>[D("禁用")]),_:2},1032,["onClick"])),[[oe,r.status!=="2"],[Y,"sys:staff:forbidden"]]):X("",!0),Q((o(),x(y,{link:"",type:"success",onClick:G=>K(r._id,"1")},{default:g(()=>[D("启用")]),_:2},1032,["onClick"])),[[oe,r.status==="2"],[Y,"sys:staff:unban"]])]),_:1})]),_:1},8,["data"])),[[ye,a(C)]]),u(Pe,{style:{"margin-top":"20px",display:"flex","justify-content":"flex-end"},"page-size":a(f).page_size,background:"","hide-on-single-page":"",layout:"prev, pager, next",total:a(b),onCurrentChange:P},null,8,["page-size","total"]),u(Ye,{ref_key:"staffPopRef",ref:q,onReloadList:S,roleList:a(l)},null,8,["roleList"])])}}});const at=We(Oa,[["__scopeId","data-v-64903c5a"]]);export{at as default};
