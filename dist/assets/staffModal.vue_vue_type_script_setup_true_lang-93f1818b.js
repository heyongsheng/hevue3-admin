import{d as G,e as f,r as y,o as m,k as b,w as a,g as t,B as v,h as o,c as I,af as C,ag as F,I as P,i as Q,j as x,a7 as Y,Q as Z,R as z,a2 as A,C as H,D as J,p as K,q as W,bY as X,bZ as ee}from"./index-9f8c10db.js";import{E as le}from"./overlay-52c4d410.js";import{a as ae,E as te,b as oe,c as ne}from"./radio-806185dc.js";import"./tag-b4e40871.js";const V={default:"1",1:"男",2:"女"};Object.defineProperty(V,"default",{enumerable:!1});const se=x("span",null,"账号：",-1),re=x("span",null,"手机号：",-1),fe=G({__name:"staffModal",props:["roleList"],emits:["reloadList"],setup(B,{expose:L,emit:R}){const U=B,r=f(!1),n=y({staff_account:"",staff_name:"",phone:"",roleId:"",gender:V.default}),d=f(),u=f(),_=f(),q=y({staff_account:[{required:!0,message:"请输入账号",trigger:["blur","change"]}],staff_name:[{required:!0,message:"请输入姓名",trigger:["blur","change"]}],phone:[{required:!0,message:"请输入员工手机号",trigger:["blur","change"]}],roleId:[{required:!0,message:"请选择角色",trigger:["blur","change"]}]}),D=async s=>{r.value=!0,await Y(),s?(Object.keys(n).forEach(e=>{n[e]=s[e]||n[e]}),s._id?(d.value=s._id,u.value="编辑菜单"):(u.value="添加菜单",d.value="")):(u.value="添加菜单",d.value="")},c=f(!1),N=s=>{s==null||s.validate().then(()=>{let e,i={...n};d.value?(e=X,i._id=d.value):e=ee,c.value=!0,e(i).then(()=>{c.value=!1,Z.success({title:"成功",message:u.value+"成功"}),r.value=!1,R("reloadList")})})},w=()=>{var s;(s=_.value)==null||s.resetFields()};return L({showModal:D}),(s,e)=>{const i=z,h=A,g=H,p=J,S=ae,j=te,O=oe,T=ne,M=K,k=W,$=le;return m(),b($,{title:o(u),modelValue:o(r),"onUpdate:modelValue":e[7]||(e[7]=l=>Q(r)?r.value=l:null),onClose:w},{footer:a(()=>[t(k,{onClick:e[5]||(e[5]=l=>r.value=!1)},{default:a(()=>[v("取消")]),_:1}),t(k,{loading:o(c),type:"primary",onClick:e[6]||(e[6]=l=>N(o(_)))},{default:a(()=>[v("确定")]),_:1},8,["loading"])]),default:a(()=>[t(M,{model:o(n),"label-width":"100px",rules:o(q),ref_key:"addFormRef",ref:_},{default:a(()=>[t(p,{label:"账号：",prop:"staff_account"},{label:a(()=>[se,t(h,{effect:"dark",content:"账号可用于登录，具有唯一性，禁止与手机号相同",placement:"top"},{default:a(()=>[t(i,{name:"tishi",style:{display:"block",height:"100%"}})]),_:1})]),default:a(()=>[t(g,{modelValue:o(n).staff_account,"onUpdate:modelValue":e[0]||(e[0]=l=>o(n).staff_account=l),placeholder:"请输入员工账号"},null,8,["modelValue"])]),_:1}),t(p,{label:"姓名：",prop:"staff_name"},{default:a(()=>[t(g,{modelValue:o(n).staff_name,"onUpdate:modelValue":e[1]||(e[1]=l=>o(n).staff_name=l),placeholder:"请输入员工姓名"},null,8,["modelValue"])]),_:1}),t(p,{prop:"phone"},{label:a(()=>[re,t(h,{effect:"dark",content:"手机号必须填写正确，员工首次登录需使用手机号重置密码",placement:"top"},{default:a(()=>[t(i,{name:"tishi",style:{display:"block",height:"100%"}})]),_:1})]),default:a(()=>[t(g,{modelValue:o(n).phone,"onUpdate:modelValue":e[2]||(e[2]=l=>o(n).phone=l),placeholder:"请输入员工手机号"},null,8,["modelValue"])]),_:1}),t(p,{label:"角色：",prop:"roleId"},{default:a(()=>[t(j,{modelValue:o(n).roleId,"onUpdate:modelValue":e[3]||(e[3]=l=>o(n).roleId=l),placeholder:"请选择角色"},{default:a(()=>[(m(!0),I(C,null,F(U.roleList,l=>(m(),b(S,{key:l._id,label:l.role_name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"性别：",prop:"gender"},{default:a(()=>[t(T,{modelValue:o(n).gender,"onUpdate:modelValue":e[4]||(e[4]=l=>o(n).gender=l)},{default:a(()=>[(m(!0),I(C,null,F(o(V),(l,E)=>(m(),b(O,{key:E,label:E},{default:a(()=>[v(P(l),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}});export{fe as _,V as g};
